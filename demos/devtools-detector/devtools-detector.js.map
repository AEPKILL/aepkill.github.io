{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 339053fa7dfdbcd5191c","webpack:///./src/devtools-checker/checker-group.ts","webpack:///./src/utils/browser.ts","webpack:///./src/utils/console.ts","webpack:///./src/devtools-checker/debugger-checker.ts","webpack:///./src/detector.ts","webpack:///./src/devtools-checker/console-checker/index.ts","webpack:///./src/utils/lazy-function.ts","webpack:///./src/devtools-checker/console-checker/common/reg-to-string.ts","webpack:///./src/devtools-checker/console-checker/common/element-id.ts","webpack:///./src/devtools-checker/firebug-checker.ts","webpack:///./src/index.ts","webpack:///./src/devtools-checker/console-checker/firefox.ts","webpack:///./src/devtools-checker/make-checker-direct-return.ts","webpack:///./src/devtools-checker/console-checker/ie-edge.ts","webpack:///./src/devtools-checker/console-checker/webkit.ts","webpack:///./src/devtools-checker/console-checker/common/dep-reg-to-string.ts","webpack:///./src/devtools-checker/console-checker/common/function-to-string.ts","webpack:///./src/utils/context.ts"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","checkers","groupName","options","__assign","getDevtoolsDetail","checkers_1","_i","length","checker","_a","skip","_b","sent","devtoolsDetail","isOpen","directReturn","checkerName","ua","navigator","userAgent","isFirefox","__WEBPACK_IMPORTED_MODULE_0__lazy_function__","indexOf","isIE","isEdge","isWebkit","test","isFunction","fn","cacheConsoleMethod","console","method","__WEBPACK_IMPORTED_MODULE_0__browser__","args","arguments","apply","_args","log","table","clear","now","performance","Date","debuggerChecker","startTime","constructor","__webpack_exports__","Detector","_listeners","_isOpen","_detectLoopStoped","_detectLoopDelay","_checker","__WEBPACK_IMPORTED_MODULE_0__devtools_checker_checker_group__","lanuch","setDetectDelay","_detectLoop","stop","clearTimeout","_timer","isLanuch","value","addListener","listener","push","removeListener","filter","_broadcast","detail","setTimeout","_this","consoleChecker","__WEBPACK_IMPORTED_MODULE_0__checker_group__","__WEBPACK_IMPORTED_MODULE_1__firefox__","__WEBPACK_IMPORTED_MODULE_2__ie_edge__","__WEBPACK_IMPORTED_MODULE_3__webkit__","result","wasRun","reg","toString","regToStringChecker","__WEBPACK_IMPORTED_MODULE_0__utils_console__","ele","document","createElement","elementIdChecker","firebugChecker","top","window","Firebug","chrome","isInitialized","__WEBPACK_IMPORTED_MODULE_0__utils_context__","defaultDetector","time","__WEBPACK_IMPORTED_MODULE_0__detector__","__WEBPACK_IMPORTED_MODULE_3__devtools_checker_firebug_checker__","__WEBPACK_IMPORTED_MODULE_1__devtools_checker_console_checker__","__WEBPACK_IMPORTED_MODULE_2__devtools_checker_debugger_checker__","firefoxChecker","__WEBPACK_IMPORTED_MODULE_3__make_checker_direct_return__","__WEBPACK_IMPORTED_MODULE_1__checker_group__","__WEBPACK_IMPORTED_MODULE_4__common_reg_to_string__","__WEBPACK_IMPORTED_MODULE_2__debugger_checker__","__WEBPACK_IMPORTED_MODULE_0__utils_browser__","ieEdgeChecker","__WEBPACK_IMPORTED_MODULE_1__common_element_id__","webkitChecker","__WEBPACK_IMPORTED_MODULE_3__common_element_id__","__WEBPACK_IMPORTED_MODULE_4__common_function_to_string__","__WEBPACK_IMPORTED_MODULE_2__common_dep_reg_to_string__","depRegToStringChecker","dep","devtoolsTestFunction","count","functionToStringChecker","isInIframe","isInCorsIframe","keys","innerWidth"],"mappings":"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","file":"devtools-detector.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"devtoolsDetector\"] = factory();\n\telse\n\t\troot[\"devtoolsDetector\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 339053fa7dfdbcd5191c","import { ExcludePropetys } from '../utils/exclude-propetys';\r\nimport { DevtoolsChecker } from './devtools-checker';\r\n\r\nexport default function checkerGroup(\r\n  checkers: DevtoolsChecker[],\r\n  groupName?: string,\r\n  options?: ExcludePropetys<DevtoolsChecker, 'name' | 'getDevtoolsDetail'>\r\n): DevtoolsChecker {\r\n  return {\r\n    ...options,\r\n    name: groupName ? groupName : 'unknow group',\r\n    async getDevtoolsDetail() {\r\n      for (const checker of checkers) {\r\n        if (checker.skip && (await checker.skip())) {\r\n          continue;\r\n        }\r\n\r\n        const devtoolsDetail = await checker.getDevtoolsDetail();\r\n        if (devtoolsDetail.isOpen || devtoolsDetail.directReturn) {\r\n          if (groupName) {\r\n            devtoolsDetail.checkerName = `${groupName}.${\r\n              devtoolsDetail.checkerName\r\n            }`;\r\n          }\r\n          return devtoolsDetail;\r\n        }\r\n      }\r\n      return {\r\n        checkerName: this.name,\r\n        isOpen: false\r\n      };\r\n    }\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/devtools-checker/checker-group.ts","import layzFunction from './lazy-function';\r\nconst ua = navigator.userAgent;\r\nexport const isFirefox = layzFunction(() => ua.indexOf('Firefox') > -1);\r\nexport const isIE = layzFunction(\r\n  () =>\r\n    // ie 11+\r\n    ua.indexOf('Trident') > -1 ||\r\n    // other ie browser\r\n    ua.indexOf('MSIE') > -1\r\n);\r\n\r\nexport const isEdge = layzFunction(() => ua.indexOf('Edge') > -1);\r\n\r\n// edge 的 userAgent 包含 chrome\r\n// -> Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36 Edge/16.16299\r\nexport const isWebkit = layzFunction(() => /webkit/i.test(ua) && !isEdge());\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/browser.ts","import { isEdge, isIE } from './browser';\r\n\r\n// tslint:disable:no-any no-empty\r\nconst FUNCTION_TYPE_STRING = typeof cacheConsoleMethod;\r\n\r\nconst isFunction = (fn: any) => typeof fn === FUNCTION_TYPE_STRING;\r\n\r\n/**\r\n * 缓存 console.log 等方法，防止第三方代码 hook console.log 等方法\r\n * 但是 ie 浏览器下不能缓存 console.log 之类的方法, 因为每次打开浏览器都是不同的 console, 调用缓存后的方法则会异常\r\n *\r\n */\r\nfunction cacheConsoleMethod<K extends keyof Console>(name: K): Console[K] {\r\n  if (console) {\r\n    const method = console[name];\r\n    if (isFunction(method)) {\r\n      if (isIE || isEdge) {\r\n        return (...args: any[]) => {\r\n          console[name](...args);\r\n        };\r\n      }\r\n      return console[name];\r\n    }\r\n  }\r\n  return (..._args: any[]) => {};\r\n}\r\n\r\nexport const log = cacheConsoleMethod('log');\r\n\r\nexport const table = cacheConsoleMethod('table');\r\n\r\nexport const clear = cacheConsoleMethod('clear');\r\n\r\n// tslint:enable:no-any no-empty\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/console.ts","import { DevtoolsChecker } from './devtools-checker';\r\n\r\nfunction now() {\r\n  if (performance) {\r\n    return performance.now();\r\n  } else {\r\n    return Date.now();\r\n  }\r\n}\r\nconst debuggerChecker: DevtoolsChecker = {\r\n  name: 'debugger-checker',\r\n  async getDevtoolsDetail() {\r\n    const startTime = now();\r\n    // tslint:disable-next-line:no-empty only-arrow-functions\r\n    (function() {}.constructor('debugger')());\r\n    return {\r\n      isOpen: now() - startTime > 100,\r\n      checkerName: this.name\r\n    };\r\n  }\r\n};\r\n\r\nexport default debuggerChecker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/devtools-checker/debugger-checker.ts","import checkerGroup from './devtools-checker/checker-group';\r\nimport {\r\n  DevtoolsChecker,\r\n  DevtoolsDetail\r\n} from './devtools-checker/devtools-checker';\r\n\r\nexport interface DetectorOptions {\r\n  checkers: DevtoolsChecker[];\r\n}\r\nexport type Listener = (isOpen: boolean, detail?: DevtoolsDetail) => void;\r\n\r\nexport class Detector {\r\n  private readonly _checker: DevtoolsChecker;\r\n  private _listeners: Listener[] = [];\r\n  private _isOpen = false;\r\n  private _detectLoopStoped = true;\r\n  private _detectLoopDelay = 500;\r\n  private _timer!: number;\r\n  constructor({ checkers }: DetectorOptions) {\r\n    this._checker = checkerGroup(checkers);\r\n  }\r\n  lanuch() {\r\n    if (this._detectLoopDelay <= 0) {\r\n      this.setDetectDelay(500);\r\n    }\r\n    if (this._detectLoopStoped) {\r\n      this._detectLoopStoped = false;\r\n      this._detectLoop();\r\n    }\r\n  }\r\n  stop() {\r\n    if (!this._detectLoopStoped) {\r\n      this._detectLoopStoped = true;\r\n      clearTimeout(this._timer);\r\n    }\r\n  }\r\n  isLanuch() {\r\n    return !this._detectLoopStoped;\r\n  }\r\n  setDetectDelay(value: number) {\r\n    this._detectLoopDelay = value;\r\n  }\r\n  addListener(listener: Listener) {\r\n    this._listeners.push(listener);\r\n  }\r\n  removeListener(listener: Listener) {\r\n    this._listeners = this._listeners.filter(value => value !== listener);\r\n  }\r\n\r\n  private _broadcast(value: DevtoolsDetail) {\r\n    for (const listener of this._listeners) {\r\n      try {\r\n        listener(value.isOpen, value);\r\n      } catch {\r\n        /** nothing to do */\r\n      }\r\n    }\r\n  }\r\n  private async _detectLoop() {\r\n    const detail = await this._checker.getDevtoolsDetail();\r\n    if (detail.isOpen != this._isOpen) {\r\n      this._isOpen = detail.isOpen;\r\n      this._broadcast(detail);\r\n    }\r\n    if (this._detectLoopDelay > 0) {\r\n      this._timer = setTimeout(() => this._detectLoop(), this._detectLoopDelay);\r\n    } else {\r\n      this.stop();\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/detector.ts","import checkerGroup from '../checker-group';\r\nimport { DevtoolsChecker } from '../devtools-checker';\r\nimport firefoxChecker from './firefox';\r\nimport ieEdgeChecker from './ie-edge';\r\nimport webkitChecker from './webkit';\r\n\r\nconst consoleChecker: DevtoolsChecker = checkerGroup(\r\n  [firefoxChecker, ieEdgeChecker, webkitChecker],\r\n  'console-checker'\r\n);\r\n\r\nexport default consoleChecker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/devtools-checker/console-checker/index.ts","// tslint:disable-next-line:no-any\r\nexport default function layzFunction<T extends (...args: any[]) => any>(\r\n  fn: T\r\n): T {\r\n  let wasRun = false;\r\n  let result!: ReturnType<T>;\r\n  // tslint:disable-next-line:only-arrow-functions no-any\r\n  return function(...args: any[]) {\r\n    if (wasRun) {\r\n      return result;\r\n    }\r\n    wasRun = true;\r\n    return (result = fn(...args));\r\n  } as T;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/lazy-function.ts","import { DevtoolsChecker } from '../../devtools-checker';\r\nimport { log, clear } from '../../../utils/console';\r\n\r\nconst reg = / /;\r\nlet isOpen = false;\r\n\r\nreg.toString = () => {\r\n  isOpen = true;\r\n  return regToStringChecker.name;\r\n};\r\n\r\nconst regToStringChecker: DevtoolsChecker = {\r\n  name: 'reg-toString-checker',\r\n  async getDevtoolsDetail() {\r\n    isOpen = false;\r\n    log(reg);\r\n    clear();\r\n    return {\r\n      isOpen,\r\n      checkerName: this.name\r\n    };\r\n  }\r\n};\r\n\r\nexport default regToStringChecker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/devtools-checker/console-checker/common/reg-to-string.ts","import { clear, log } from '../../../utils/console';\r\nimport { DevtoolsChecker } from '../../devtools-checker';\r\n\r\nconst ele = document.createElement('div');\r\nlet isOpen = false;\r\n\r\nObject.defineProperty(ele, 'id', {\r\n  get() {\r\n    isOpen = true;\r\n    return elementIdChecker.name;\r\n  },\r\n  configurable: true\r\n});\r\n\r\nconst elementIdChecker: DevtoolsChecker = {\r\n  name: 'element-id-chekcer',\r\n  async getDevtoolsDetail() {\r\n    isOpen = false;\r\n    log(ele);\r\n    clear();\r\n    return {\r\n      isOpen,\r\n      checkerName: this.name\r\n    };\r\n  }\r\n};\r\n\r\nexport default elementIdChecker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/devtools-checker/console-checker/common/element-id.ts","import { isInCorsIframe } from '../utils/context';\r\nimport { DevtoolsChecker } from './devtools-checker';\r\n\r\ndeclare global {\r\n  interface Window {\r\n    Firebug: {\r\n      chrome: {\r\n        isInitialized: boolean;\r\n      };\r\n    };\r\n  }\r\n}\r\n\r\nconst firebugChecker: DevtoolsChecker = {\r\n  name: 'firebug-checker',\r\n  async getDevtoolsDetail() {\r\n    const top = window.top;\r\n    let isOpen: boolean = false;\r\n    try {\r\n      isOpen =\r\n        top.Firebug && top.Firebug.chrome && top.Firebug.chrome.isInitialized;\r\n    } catch {\r\n      /** nothing todo */\r\n    }\r\n    return {\r\n      isOpen,\r\n      checkerName: this.name\r\n    };\r\n  },\r\n  async skip() {\r\n    return isInCorsIframe();\r\n  }\r\n};\r\n\r\nexport default firebugChecker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/devtools-checker/firebug-checker.ts","import { Detector, Listener } from './detector';\r\nimport consoleChecker from './devtools-checker/console-checker';\r\nimport debuggerChecker from './devtools-checker/debugger-checker';\r\nimport firebugChecker from './devtools-checker/firebug-checker';\r\n\r\nconst defaultDetector = new Detector({\r\n  checkers: [firebugChecker, consoleChecker, debuggerChecker]\r\n});\r\n\r\nexport function addListener(listener: Listener) {\r\n  defaultDetector.addListener(listener);\r\n}\r\nexport function removeListener(listener: Listener) {\r\n  defaultDetector.removeListener(listener);\r\n}\r\nexport function isLanuch() {\r\n  return defaultDetector.isLanuch();\r\n}\r\nexport function stop() {\r\n  defaultDetector.stop();\r\n}\r\nexport function lanuch() {\r\n  defaultDetector.lanuch();\r\n}\r\nexport function setDetectDelay(time: number) {\r\n  defaultDetector.setDetectDelay(time);\r\n}\r\nexport { DevtoolsChecker } from './devtools-checker/devtools-checker';\r\n\r\nexport { default as consoleChecker } from './devtools-checker/console-checker';\r\nexport {\r\n  default as debuggerChecker\r\n} from './devtools-checker/debugger-checker';\r\nexport { default as firebugChecker } from './devtools-checker/firebug-checker';\r\n\r\nexport { Detector, Listener } from './detector';\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import { isFirefox } from '../../utils/browser';\r\nimport checkerGroup from '../checker-group';\r\nimport debuggerChecker from '../debugger-checker';\r\nimport { DevtoolsChecker } from '../devtools-checker';\r\nimport makeCheckerDirectReturn from '../make-checker-direct-return';\r\nimport regToStringChecker from './common/reg-to-string';\r\n\r\nconst firefoxChecker: DevtoolsChecker = {\r\n  ...makeCheckerDirectReturn(\r\n    checkerGroup([regToStringChecker, debuggerChecker])\r\n  ),\r\n  name: 'firefox-checker',\r\n  async skip() {\r\n    return !isFirefox();\r\n  }\r\n};\r\n\r\nexport default firefoxChecker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/devtools-checker/console-checker/firefox.ts","import { DevtoolsChecker } from './devtools-checker';\r\n\r\nexport default function makeCheckerDirectReturn(\r\n  checker: DevtoolsChecker\r\n): DevtoolsChecker {\r\n  return {\r\n    ...checker,\r\n    async getDevtoolsDetail() {\r\n      const detail = await checker.getDevtoolsDetail();\r\n      detail.directReturn = true;\r\n      return detail;\r\n    }\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/devtools-checker/make-checker-direct-return.ts","import { isEdge, isIE } from '../../utils/browser';\r\nimport { DevtoolsChecker } from '../devtools-checker';\r\nimport elementIdChecker from './common/element-id';\r\n\r\nconst ieEdgeChecker: DevtoolsChecker = {\r\n  ...elementIdChecker,\r\n  name: 'ie-edge-checker',\r\n  async skip() {\r\n    return !(isIE() || isEdge());\r\n  }\r\n};\r\n\r\nexport default ieEdgeChecker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/devtools-checker/console-checker/ie-edge.ts","import { isWebkit } from '../../utils/browser';\r\nimport checkerGroup from '../checker-group';\r\nimport { DevtoolsChecker } from '../devtools-checker';\r\nimport depRegToStringChecker from './common/dep-reg-to-string';\r\nimport elementIdChecker from './common/element-id';\r\nimport functionToStringChecker from './common/function-to-string';\r\n\r\nconst webkitChecker: DevtoolsChecker = {\r\n  ...checkerGroup([\r\n    elementIdChecker,\r\n    functionToStringChecker,\r\n    depRegToStringChecker\r\n  ]),\r\n  name: 'webkit-checker',\r\n  async skip() {\r\n    return !isWebkit();\r\n  }\r\n};\r\n\r\nexport default webkitChecker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/devtools-checker/console-checker/webkit.ts","import { DevtoolsChecker } from '../../devtools-checker';\r\nimport { log, clear, table } from '../../../utils/console';\r\n\r\nconst reg = / /;\r\nlet isOpen = false;\r\n\r\nreg.toString = () => {\r\n  isOpen = true;\r\n  return depRegToStringChecker.name;\r\n};\r\n\r\nconst depRegToStringChecker: DevtoolsChecker = {\r\n  name: 'dep-reg-toString-checker',\r\n  async getDevtoolsDetail() {\r\n    isOpen = false;\r\n    table({ dep: reg });\r\n    clear();\r\n    return {\r\n      isOpen,\r\n      checkerName: this.name\r\n    };\r\n  }\r\n};\r\n\r\nexport default depRegToStringChecker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/devtools-checker/console-checker/common/dep-reg-to-string.ts","import { clear, log } from '../../../utils/console';\r\nimport { DevtoolsChecker } from '../../devtools-checker';\r\n\r\nfunction devtoolsTestFunction() {\r\n  // nothing todo\r\n}\r\n\r\nlet count = 0;\r\n\r\ndevtoolsTestFunction.toString = () => {\r\n  count++;\r\n};\r\n\r\nconst functionToStringChecker: DevtoolsChecker = {\r\n  name: 'function-to-string-checker',\r\n  async getDevtoolsDetail() {\r\n    count = 0;\r\n    log(devtoolsTestFunction);\r\n    clear();\r\n    return {\r\n      isOpen: count === 2,\r\n      checkerName: this.name\r\n    };\r\n  }\r\n};\r\n\r\nexport default functionToStringChecker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/devtools-checker/console-checker/common/function-to-string.ts","import layzFunction from './lazy-function';\r\nexport const isInIframe = layzFunction(() => window.top !== window);\r\nexport const isInCorsIframe = layzFunction(() => {\r\n  if (!isInIframe()) {\r\n    return false;\r\n  }\r\n  try {\r\n    Object.keys(window.top.innerWidth);\r\n    return false;\r\n  } catch {\r\n    return true;\r\n  }\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/context.ts"],"sourceRoot":""}